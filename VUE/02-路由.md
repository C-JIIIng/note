# 路由

## 什么是路由

1. **后端路由：**对于普通的网站，所有的超链接都是URL地址，所有的URL地址都对应服务器上对应的路由
2. **前端路由：**对于单页面应用程序来说，主要通过URL中的hash（#号）来实现不同页面之间的切换，同时，hash有一个特点：HTTP请求中不会包含hash相关的内容；所以，单页面程序中的页面跳转主要用hash实现
3. 在单页面应用程序，这种通过hash来改变切换页面的方式，称为前端路由

## 在 vue 中使用 vue-router

### 1.路由的基本使用

#### 流程

+ 用户点击链接 跳转指定路由
+ 根据路由规则，匹配对应的组件渲染到界面上

#### 代码片段

1.引入路由模块

```js
<!--  1.安装 vue-router 路由模块  -->
<script src="../js/vue-router-3.1.2.js"></script>
```

2.HTML

```js
<div id="app">
    <!-- 使用 router-link 组件来导航. -->
    <!-- 通过传入 `to` 属性指定链接. -->
    <!-- <router-link> 默认会被渲染成一个 `<a>` 标签 -->
    <!-- 若要修改默认渲染标签 可以使用 tag属性  -->
    <!--  <router-link to="/login" tag="span">登录</router-link> -->
  	<router-link to="/login">登录</router-link>
    <router-link to="/register">注册</router-link>

    <!--  这是 vue-router 提供的元素 专门用来当做占位符，将来，路由规则匹配到的组件 就会展示到这个 router-view 中  -->
    <router-view></router-view>
</div>
```

3.JS

```JS
// 创建对应组件模板
	var login = {
    	template:'<h1>登录组件</h1>'
	}
	var register = {
    	template:'<h1>注册组件</h1>'
	}

// 创建路由对象
// 创建一个路由对象,当导入vue-router包之后，在window全局对象中,就有了一个路由的构造函数,VueRouter
    // 在 new 路由对象的时候 可以为 构造函数 传递一个匹配对象
    var routerObj = new VueRouter({
        // route 这个匹配对象中的 route 表示 【路由匹配规则】 的意思
        routes:[// 路由匹配规则
            // 每一个路由规则 就是一个对象 这个对象 有两个属性
            // 属性1 是 path 表示监听 那个路由链接地址
            // 属性2 是 component 表示 如果路由是前面匹配到的path 则展示 component 属性对应的组件
            // 注意：component 属性值必须是 一个组件的模板对象 不能是 组件的引用名称
            // 路由重定向
            { path:'/', redirect:login },
            { path: '/login', component: login },
            { path: '/register', component: register}
        ]
    })
    
// 在vm实例中注册路由对象
    var vm = new Vue({
        el:'#app',
        data:{},
        methods:{},
        router:routerObj // 将路由规则对象注册到 vm 实例上 用来监听 URL 地址的变化，然后展示对应组件
    })
```



### 2.`<router-link>`

`<router-link>` 组件支持用户在具有路由功能的应用中 (点击) 导航。

 通过 `to` 属性指定目标地址，默认渲染成带有正确链接的 `<a>` 标签，可以通过配置 `tag` 属性生成别的标签。

另外，当目标路由成功激活时，链接元素自动设置一个表示激活的 CSS 类名( active-class)。

**设置导航高亮**

当目标路由成功激活时，链接元素自动设置一个表示激活的 CSS 类名( active-class)

默认值：  `"router-link-active"`

设置 链接激活时使用的 CSS 类名。默认值可以通过路由的构造选项 `linkActiveClass` 来全局配置。

+ 使用默认的类名

```js
<style>
    .router-link-active{
        background-color: red;
        font-size: 30px;
    }
</style>
```

![active-class](D:\workplace\总结\VUE\图片\active-class.png)

+ 使用自命名类名

```
<style>
    .myactive{
    background-color: red;
    font-size: 30px;
    }
</style>
```

```js
<script>
    var routerObj = new VueRouter({
        routes:[
            { path:'/', redirect:login },
            { path: '/login', component: login },
            { path: '/register', component: register}
        ],
        linkActiveClass: 'myactive'
     })
</script>
```



### 3.路由中使用动画

使用transition组件来包裹 定义类样式来实现动画

```html
<transition mode="out-in">
	<router-view></router-view>
</transition>
```

```css
.v-enter,.v-leave-active{
    opacity: 0;
    transform: translateX(150px);
}
.v-enter-active,.v-leave-active{
    transition:all 1s ease;
}
```



### 4.路由传参

#### 使用query来传递参数

```
<!--  如果在路由中 使用 查询字符串 给路由传递参数 则不需要修改 路由参数中的path属性  -->
<router-link to="/login?id=10&name=zs">login</router-link>
```

在组件身上有一个`$route`属性,其属性值为一个对象，这个对象中包含一个query属性 包含我们传递的参数，可以通过 `.键名` 来获取`键值`

![$rounte](D:\workplace\总结\VUE\图片\$route.png)



```js
var login = {
    template: '<h1>login--{{ $route.query.id }}--{{ $route.query.name }}</h1>',
    created(){ // 组件的生命周期钩子函数
        console.log(this.$route);
    }
}
```

#### 使用params来传递参数

```html
<router-link to="/login/10/mm">login</router-link>
```

使用`$route`上的`params`来获取参数

![params](D:\workplace\总结\VUE\图片\params.png)

```js
var login = {
    template:'<h1>login--{{ $route.params.id }}--{{ $route.params.name }}</h1>',
    created(){ // 组件的生命周期钩子函数
        console.log(this.$route);
    }
}
var routerObj = new VueRouter({
    routes:[
        //在路由路径中 使用占位符来传入参数
        { path: '/login/:id/:name', component: login },
        { path: '/register', component: register }
    ]
})
```



### 5.路由嵌套

使用children属性来实现路由嵌套

#### 代码片段

```html
<div id="app">
    <router-link to="/account">Account</router-link>
    <router-view></router-view>
</div>
<template id="tmp1">
    <div>
        <h1>这是Account组件</h1>
        <router-link to="/account/login">login</router-link>
        <router-link to="/account/register">register</router-link>
        <router-view></router-view>
    </div>
</template>
```

```js
<script>
    var account = {
        template: '#tmp1'
    }
    var login = {
        template:'<h3>login</h3>'
    }
    var register = {
        template:'<h3>register</h3>'
    }

    var router = new VueRouter({
        routes:[
            {
                path: '/account',
                component: account,
                // 使用children 属性 实现子路由 同时 子路由的path前不要 加 / 否则 永远以根路径开始请求 这样不方便用户理解url地址
                children:[
                    { path: 'login', component: login },
                    { path: 'register', component: register }
                ]
            }
            // { path: '/account', component: account },
            // { path: '/account/login', component: login },
            // { path: '/account/register', component: register },
        ]
    })
    
    var vm = new Vue({
        el:'#app',
        data:{},
        methods:{},
        router
    })
</script>
```

#### vue组件容器图解

![children](D:\workplace\总结\VUE\图片\children.png)



### 6.命名视图

在一个页面上显示多个组件 可以考虑使用命名视图

```html
<div id="app">
    <router-view></router-view>
    <div class="container">
        <router-view name="left"></router-view>
        <router-view name="content"></router-view>
    </div>
</div>
```

```js
<script>
    var header = {
        template: '<h1 class="header">Header头部区域</h1>'
    }
    var leftBox = {
        template: '<h1 class="left">Left侧边栏区域</h1>'
    }
    var contentBox = {
        template: '<h1 class="content">Content内容区域</h1>'
    }

    var  router = new VueRouter({
        routes:[
            // {path: '/', component: header},
            // {path: '/left', component: leftBox},
            // {path: '/content', component: contentBox}
			// 将对应路径的组件 将component配置 修改为 components 
            // 其值为一个对象 视图的name值：要显示的组件
            {path: '/', components: {
                'default': header,
                'left': leftBox,
                'content': contentBox
            }},
        ]
    })
    var vm = new Vue({
        el:'#app',
        data:{},
        methods:{},
        router
    })
</script>
```





















